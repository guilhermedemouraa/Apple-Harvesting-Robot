<!DOCTYPE HTML>

<html>

  <head>


  	<link href="https://fonts.googleapis.com/css?family=Indie+Flower|Josefin+Sans:700i|Mali" rel="stylesheet">



    <style>

    
	    body{

	    	background: url(https://cdn.learfield.com/wp-content/uploads/2017/08/UC-Davis-Football.jpg);

	    	background-size: cover;

	    	background-repeat: no-repeat;

	    }


	      button{

	      	background: url(https://pbs.twimg.com/profile_images/845137106120847361/ELLZvaFj_400x400.jpg);

	        background-size: cover;

	        border:1px solid black;

	        display:inline-block;

	        color: #ff6666;

	        font-size: 100px;

	        margin:20px;

	        width:150px;

	        height:150px;

	        font-family: 'Indie Flower', cursive;

	        font-weight: bold;

	        cursor:pointer;

	        padding-top:8px

	      }

	      button:hover{color:black;}


	      h1{

	      	font-family: 'Mali', cursive;

	      	font-size: 50px;

	      	color: #0066ff;

	      	text-align: center; 

	      }



	      h2{

	      	font-family: 'Josefin Sans', sans-serif;

	      	font-size: 35px;

	      	color: #6699ff;

	      	text-align: center; 

	      }

	     h3{

	      	font-family: 'Josefin Sans', sans-serif;

	      	font-size: 30px;

	      	color: #6699ff;

	      	text-align: center; 

	      }

        canvas{
          background: white;
        }

    </style>

    <h1>EBS 289K IoT</h1>

    <h2>Gui & Kaiyan</h2>

  </head>

  <body>

    </div>

    <h2 style="color:red">Apple Picking Final Project</h2>

    <h3 style="font-size: 25px"></h3> 



    <h2><p id="value">Turn = 1 Distance = 750 mm</p>
      <canvas id="myCanvas" width="1500" height="1000" style="border:1px solid #d3d3d3;"></canvas>
    </h3>

   <script>

    function httpPost(path, param)

    {

      var req = new XMLHttpRequest();

      req.open("POST", path, true);

      req.setRequestHeader("Content-type",

      "application/x-www-form-urlencoded");

      req.send(param);

    }

    var autoTimer = setInterval(getFromMcu, 200);
    function useMcuReply(response)

      {

        var val = document.getElementById("value");

	   var loc = dist.split(",",2);

        wp = loc[0];

        dist = loc[1];

        val.innerHTML = "wpIndex = " + wp + " Distance = " + dist;

      }



      function getFromMcu()

      {

        httpGet("/tpfm", useMcuReply);

	   httpGet("/tpfm",draw);

      }



      function httpGet(path, callback)

      {

        var req = new XMLHttpRequest();

        req.open("GET", path, true); 

        req.onreadystatechange = function() 

        { 

          if (req.readyState == 4)

            if(req.status == 200)

       	callback(req.responseText);

            else

              callback("Waiting...");

        }

        req.send(null);

      }



function draw(dist)

{

var where = dist.split(",",2);

wpIndex = where[0];

distance = where[1];

wpIndex = 1;
distance = 750;
y0 = 45;

    var x, y;

    if (wpIndex == 1) {
      x = 198+25;
      y = 2400-(2400-distance);
    } else {
      x = 1300-25;
      y = 900-distance;
    }
    
    var c = document.getElementById("myCanvas");

    var ctx = c.getContext("2d");

    ctx.beginPath();

    ctx.moveTo(48, 900);
    ctx.lineTo(48, 40);
    ctx.lineTo(1450, 40);
    ctx.lineTo(1450, 900);
    ctx.lineTo(48, 900);
    ctx.moveTo(48, 900);
    ctx.moveTo(701, 900);
    ctx.lineTo(701, 40);

    //---1---

    ctx.moveTo(48, 814);
    ctx.lineTo(198, 814);
    ctx.moveTo(48, 728);
    ctx.lineTo(198, 728);
    ctx.moveTo(48, 642);
    ctx.lineTo(198, 642);
    ctx.moveTo(48, 556);
    ctx.lineTo(198, 556);
    ctx.moveTo(48, 470);
    ctx.lineTo(198, 470);
    ctx.moveTo(48, 384);
    ctx.lineTo(198, 384);
    ctx.moveTo(48, 298);
    ctx.lineTo(198, 298);
    ctx.moveTo(48, 212);
    ctx.lineTo(198, 212);
    ctx.moveTo(48, 126);
    ctx.lineTo(198, 126);

//----2---

    ctx.moveTo(851, 814);
    ctx.lineTo(551, 814);
    ctx.moveTo(851, 728);
    ctx.lineTo(551, 728);
    ctx.moveTo(851, 642);
    ctx.lineTo(551, 642);
    ctx.moveTo(851, 556);
    ctx.lineTo(551, 556);
    ctx.moveTo(851, 470);
    ctx.lineTo(551, 470);
    ctx.moveTo(851, 384);
    ctx.lineTo(551, 384);
    ctx.moveTo(851, 298);
    ctx.lineTo(551, 298);
    ctx.moveTo(851, 212);
    ctx.lineTo(551, 212);
    ctx.moveTo(851, 126);
    ctx.lineTo(551, 126);

//---3---

    ctx.moveTo(1450, 814);
    ctx.lineTo(1300, 814);
    ctx.moveTo(1450, 728);
    ctx.lineTo(1300, 728);
    ctx.moveTo(1450, 642);
    ctx.lineTo(1300, 642);
    ctx.moveTo(1450, 556);
    ctx.lineTo(1300, 556);
    ctx.moveTo(1450, 470);
    ctx.lineTo(1300, 470);
    ctx.moveTo(1450, 384);
    ctx.lineTo(1300, 384);
    ctx.moveTo(1450, 298);
    ctx.lineTo(1300, 298);
    ctx.moveTo(1450, 212);
    ctx.lineTo(1300, 212);
    ctx.moveTo(1450, 126);
    ctx.lineTo(1300, 126);

// ---------------------
  	ctx.lineWidth=6;
    ctx.strokeStyle = "red";
    ctx.stroke();
    
   
    var ctr = c.getContext("2d");
    ctr.beginPath();
    ctr.moveTo(x, y);
    ctr.arc(x, y, 10, 0, Math.PI * 2, false);
    ctr.strokeStyle = "blue";
    ctr.stroke();
    ctr.fillStyle = 'blue';
    ctr.fill();
    
    var cty = c.getContext("2d");
    
    cty.font = "30px Arial";
	cty.fillText("Zone 1",60,610);
    cty.fillText("Zone 2",60,360);
    cty.fillText("Zone 3",60,100);
    cty.font = "20px Arial";
	cty.fillText("Green = 0",170,590);
    cty.fillText("Red = 2",170,610);
    cty.fillText("Pink = 1",170,630);
    cty.fillText("Green = 2",170,330);
    cty.fillText("Red = 1",170,350);
    cty.fillText("Pink = 0",170,370);
    cty.fillText("Green = 1",170,70);
    cty.fillText("Red = 0",170,90);
    cty.fillText("Pink = 2",170,110);
    //------------
    cty.font = "30px Arial";
	cty.fillText("Zone 6",1340,610);
    cty.fillText("Zone 5",1340,360);
    cty.fillText("Zone 4",1340,100);
    cty.font = "20px Arial";
	cty.fillText("Green = ?",1230,590);
    cty.fillText("Red = ?",1230,610);
    cty.fillText("Pink = ?",1230,630);
    cty.fillText("Green = ?",1230,330);
    cty.fillText("Red = ?",1230,350);
    cty.fillText("Pink = ?",1230,370);
    cty.fillText("Green = ?",1230,70);
    cty.fillText("Red = ?",1230,90);
    cty.fillText("Pink = ?",1230,110);
    
    cty.strokeStyle = "green";
    cty.stroke();
    cty.fillStyle = 'green';
    cty.fill();

	}

  </script>

 </body>

</html>
